/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/. */

/* ::::: checkbox ::::: */

checkbox {
  -moz-appearance: checkbox-container;
  margin: 2px 4px;
  border-left: 2px transparent;
  border-right: 2px transparent;
}

/* With native theming on, the spacer-box paints the check mark and includes
   the spacing to the right, so that oversized checkbox images can slop over
   into the space.

   If we need to disable checkbox theming, the spacer box no longer paints
   the check mark, but its fallback CSS border supplies the padding between
   the mark and the label.  The xul:image then takes over painting the check
   mark. */

.checkbox-spacer-box {
  -moz-appearance: checkbox;
  -moz-box-align: center;
  margin: 2px;
  border-right: 2px solid transparent;
}

.checkbox-label-center-box {
  -moz-box-align: center;
}

.checkbox-label-box {
  -moz-appearance: checkbox-label;
}

.checkbox-icon[src] {
  margin-inline-end: 2px;
}

.checkbox-label {
  margin: 0 !important;
}

/* ..... focused state ..... */

checkbox:focus > .checkbox-label-center-box > .checkbox-label-box {
  border: 1px dotted ThreeDDarkShadow;
}

/* ..... disabled state ..... */

checkbox[disabled="true"] > .checkbox-spacer-box > .checkbox-check {
  background-color: -moz-Dialog;
}

checkbox[disabled="true"] {
  color: GrayText;
}

/* ::::: checkmark image ::::: */

.checkbox-check {
  border: 2px solid;
  -moz-border-top-colors: ThreeDShadow ThreeDDarkShadow;
  -moz-border-right-colors: ThreeDHighlight ThreeDLightShadow;
  -moz-border-bottom-colors: ThreeDHighlight ThreeDLightShadow;
  -moz-border-left-colors: ThreeDShadow ThreeDDarkShadow;
  min-width: 13px;
  min-height: 13px;
  background: -moz-Field no-repeat 50% 50%;
}

checkbox:not([disabled="true"]):hover {
  color: -moz-buttonhovertext;
  text-shadow: none;
}

checkbox:hover:active > .checkbox-spacer-box > .checkbox-check {
  background-color: -moz-Dialog;
}

/* ..... checked state ..... */

checkbox[checked="true"] > .checkbox-spacer-box > .checkbox-check {
  background-image: url("chrome://global/skin/checkbox/cbox-check.gif");
}

checkbox[checked="true"][disabled="true"] > .checkbox-spacer-box > .checkbox-check {
  background-image: url("chrome://global/skin/checkbox/cbox-check-dis.gif") !important
}

@media (prefers-color-scheme: dark) {
  /* ::::: checkbox ::::: */

  checkbox {
    -moz-appearance: none;
    -moz-box-align: center;
    margin: 2px 4px;
    padding-top: 1px;
    padding-bottom: 1px;
    padding-inline-start: 4px;
    padding-inline-end: 2px;
    border-radius: 2px;
  }

  .checkbox-spacer-box {
    -moz-appearance: none;
  }

  .checkbox-label-box {
    margin-inline-start: 2px;
    border: 1px solid transparent;
    padding: 0px 1px;
  }

  .checkbox-icon {
    margin-inline-end: 2px;
  }

  .checkbox-label {
    margin: 0 !important;
  }

  /* ..... focused state ..... */

  checkbox:-moz-focusring > .checkbox-label-box {
    border: 1px dotted rgb(200,200,200)
  }

  /* ..... disabled state ..... */

  checkbox[disabled="true"] > .checkbox-check {
    background-color: rgb(62, 62, 62);
  }

  checkbox[disabled="true"] {
    color: GrayText;
  }

  /* ::::: checkmark image ::::: */

  .checkbox-check {
    -moz-appearance: none;
    -moz-box-align: center;
    border: 1px solid;
    -moz-border-top-colors: rgb(150, 150, 150);
    -moz-border-right-colors: rgb(150, 150, 150);
    -moz-border-bottom-colors: rgb(150, 150, 150);
    -moz-border-left-colors: rgb(150, 150, 150);
    min-width: 13px;
    min-height: 13px;
    background: rgb(73, 73, 73) no-repeat 50% 50%;
    background-image: linear-gradient(rgba(0,0,0,0.4) 30%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.1) 100%);
  }
    
  checkbox:hover:active > .checkbox-check,
  checkbox:hover:active > .checkbox-spacer-box > .checkbox-check {
    background-color: rgb(96, 96, 96);
  }

  /* ..... checked state ..... */

  checkbox[checked="true"] > .checkbox-check,
  checkbox[checked="true"] > .checkbox-spacer-box > .checkbox-check {
    background-image: url("chrome://global/skin/checkbox/cbox-check.svg#check"), linear-gradient(rgba(0,0,0,0.4) 30%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.1) 100%);
  }

  checkbox[checked="true"][disabled="true"] > .checkbox-check,
  checkbox[checked="true"][disabled="true"] > .checkbox-spacer-box > .checkbox-check {
    background-image: url("chrome://global/skin/checkbox/cbox-check.svg#check-dis") !important;
  }
}